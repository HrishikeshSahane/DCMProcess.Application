{"ast":null,"code":"module.exports = function ( /*Buffer*/inbuf) {\n  var zlib = require(\"zlib\");\n  var opts = {\n    chunkSize: (parseInt(inbuf.length / 1024) + 1) * 1024\n  };\n  return {\n    deflate: function () {\n      return zlib.deflateRawSync(inbuf, opts);\n    },\n    deflateAsync: function ( /*Function*/callback) {\n      var tmp = zlib.createDeflateRaw(opts),\n        parts = [],\n        total = 0;\n      tmp.on(\"data\", function (data) {\n        parts.push(data);\n        total += data.length;\n      });\n      tmp.on(\"end\", function () {\n        var buf = Buffer.alloc(total),\n          written = 0;\n        buf.fill(0);\n        for (var i = 0; i < parts.length; i++) {\n          var part = parts[i];\n          part.copy(buf, written);\n          written += part.length;\n        }\n        callback && callback(buf);\n      });\n      tmp.end(inbuf);\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}