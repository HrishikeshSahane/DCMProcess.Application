{"ast":null,"code":"'use strict';\n\nconst fs = require('graceful-fs');\nconst path = require('path');\nconst copySync = require('../copy-sync').copySync;\nconst removeSync = require('../remove').removeSync;\nconst mkdirpSync = require('../mkdirs').mkdirpSync;\nconst stat = require('../util/stat');\nfunction moveSync(src, dest, opts) {\n  opts = opts || {};\n  const overwrite = opts.overwrite || opts.clobber || false;\n  const {\n    srcStat\n  } = stat.checkPathsSync(src, dest, 'move');\n  stat.checkParentPathsSync(src, srcStat, dest, 'move');\n  mkdirpSync(path.dirname(dest));\n  return doRename(src, dest, overwrite);\n}\nfunction doRename(src, dest, overwrite) {\n  if (overwrite) {\n    removeSync(dest);\n    return rename(src, dest, overwrite);\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.');\n  return rename(src, dest, overwrite);\n}\nfunction rename(src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest);\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err;\n    return moveAcrossDevice(src, dest, overwrite);\n  }\n}\nfunction moveAcrossDevice(src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true\n  };\n  copySync(src, dest, opts);\n  return removeSync(src);\n}\nmodule.exports = moveSync;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}