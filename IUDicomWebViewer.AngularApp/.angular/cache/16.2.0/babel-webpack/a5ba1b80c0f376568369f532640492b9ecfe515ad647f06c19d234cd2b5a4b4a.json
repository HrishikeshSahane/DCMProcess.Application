{"ast":null,"code":"import { CornerstoneDirective } from './cornerstone.directive';\nimport { ThumbnailDirective } from './thumbnail.directive';\nimport { faSun } from '@fortawesome/free-solid-svg-icons';\nimport { faAdjust } from '@fortawesome/free-solid-svg-icons';\nimport { faScroll } from '@fortawesome/free-solid-svg-icons';\nimport { faRuler } from '@fortawesome/free-solid-svg-icons';\nimport { faCircleDot } from '@fortawesome/free-solid-svg-icons';\nimport { faAngleRight } from '@fortawesome/free-solid-svg-icons';\nimport { faCircle } from '@fortawesome/free-solid-svg-icons';\nimport { faSquare } from '@fortawesome/free-solid-svg-icons';\nimport { faUndo } from '@fortawesome/free-solid-svg-icons';\nimport { faSearchPlus } from '@fortawesome/free-solid-svg-icons';\nimport { faArrowsAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faCirclePlay } from '@fortawesome/free-solid-svg-icons';\nimport { faCirclePause } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/progress-spinner\";\nimport * as i3 from \"@fortawesome/angular-fontawesome\";\nimport * as i4 from \"./cornerstone.directive\";\nimport * as i5 from \"./thumbnail.directive\";\nconst _c0 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nfunction DICOMViewerComponent_div_1_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_1_a_2_Template_a_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const i_r8 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.showSeries(i_r8));\n    });\n    i0.ɵɵelement(1, \"div\", 31);\n    i0.ɵɵelementStart(2, \"div\", 32);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 6)(5, \"div\", 33);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const series_r7 = ctx.$implicit;\n    const i_r8 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(4, _c0, ctx_r6.currentSeriesIndex === i_r8));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"imageData\", series_r7.imageList[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(series_r7.seriesDescription);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(series_r7.imageCount);\n  }\n}\nfunction DICOMViewerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26);\n    i0.ɵɵtemplate(2, DICOMViewerComponent_div_1_a_2_Template, 7, 6, \"a\", 27);\n    i0.ɵɵelementStart(3, \"div\", 28)(4, \"h6\", 29)(5, \"small\");\n    i0.ɵɵtext(6, \"1.20.12.17\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.seriesList);\n  }\n}\nfunction DICOMViewerComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"fa-icon\", 34);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.enableWindowing());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"fa-icon\", 35);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_2_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.invertImage());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"fa-icon\", 36);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.enableScroll());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"fa-icon\", 37);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.enableLength());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"fa-icon\", 38);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_5_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.enableAngle());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"fa-icon\", 38);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_6_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.enableProbe());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"fa-icon\", 39);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_7_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.enableElliptical());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"fa-icon\", 40);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_8_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.enableRectangle());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"fa-icon\", 41);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_div_20_Template_fa_icon_click_9_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.resetImage());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faSun);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faAdjust);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faScroll);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faRuler);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faAnglesRight);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faCircleDot);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faCircle);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faSquare);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r1.faUndo);\n  }\n}\nfunction DICOMViewerComponent_fa_icon_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"fa-icon\", 15);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_fa_icon_24_Template_fa_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.playClip());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r2.faCirclePlay);\n  }\n}\nfunction DICOMViewerComponent_fa_icon_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"fa-icon\", 15);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_fa_icon_25_Template_fa_icon_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.stopClip());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r3.faCircleStop);\n  }\n}\nfunction DICOMViewerComponent_a_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 42);\n    i0.ɵɵelement(1, \"span\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"href\", ctx_r4.downloadImagesURL, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DICOMViewerComponent_a_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 44);\n    i0.ɵɵlistener(\"click\", function DICOMViewerComponent_a_31_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.loadMoreImages());\n    });\n    i0.ɵɵelement(1, \"i\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" clique aqui para trazer as pr\\u00F3ximas \", ctx_r5.moreImagestoLoad, \" imagens \");\n  }\n}\nexport let DICOMViewerComponent = /*#__PURE__*/(() => {\n  class DICOMViewerComponent {\n    // control enable/disable image scroll buttons\n    get hidePreviousImage() {\n      return {\n        color: this.viewPort.currentIndex < 1 ? 'black' : 'white'\n      };\n    }\n    get hideNextImage() {\n      return {\n        color: this.viewPort.currentIndex >= this.imageCount - 1 ? 'black' : 'white'\n      };\n    }\n    // control message for more images to load\n    get moreImagestoLoad() {\n      if (this.loadedImages.length < this.imageIdList.length && !this.loadingImages) {\n        // are there any more images to load?\n        const imagesToLoad = this.maxImagesToLoad <= 0 ? this.imageIdList.length - this.loadedImages.length : Math.min(this.maxImagesToLoad, this.imageIdList.length - this.loadedImages.length);\n        return imagesToLoad.toString();\n      } else return '';\n    }\n    get showProgress() {\n      return {\n        display: this.loadingImages ? 'inline-block' : 'none'\n      };\n    }\n    constructor() {\n      this.faSun = faSun;\n      this.faAdjust = faAdjust;\n      this.faScroll = faScroll;\n      this.faRuler = faRuler;\n      this.faAngleRight = faAngleRight;\n      this.faCircleDot = faCircleDot;\n      this.faCircle = faCircle;\n      this.faSquare = faSquare;\n      this.faUndo = faUndo;\n      this.faSearchPlus = faSearchPlus;\n      this.faArrowsAlt = faArrowsAlt;\n      this.faCirclePlay = faCirclePlay;\n      this.faCirclePause = faCirclePause;\n      this.enableViewerTools = false; // enable viewer tools\n      this.enablePlayTools = false; // enable Play Clip tools\n      this.downloadImagesURL = ''; // download images URL\n      this.maxImagesToLoad = 20; // limit for the automatic loading of study images\n      this.seriesList = []; // list of series on the images being displayed\n      this.currentSeriesIndex = 0;\n      this.currentSeries = {};\n      this.imageCount = 0; // total image count being viewed\n      // control exhibition of a loading images progress indicator\n      this.loadingImages = false;\n      this.loadedImages = [];\n      this.imageIdList = [];\n      this.targetImageCount = 0;\n    }\n    ngOnInit() {\n      this.element = this.viewPort.element;\n    }\n    /**\n     * Load dicom images for display\n     *\n     * @param imageIdList list of imageIds to load and display\n     */\n    loadStudyImages(imageIdList) {\n      this.element = this.viewPort.element;\n      this.imageIdList = imageIdList;\n      this.viewPort.resetViewer();\n      this.viewPort.resetImageCache(); // clean up image cache\n      this.seriesList = []; // start a new series list\n      this.currentSeriesIndex = 0; // always display first series\n      this.loadedImages = []; // reset list of images already loaded\n      //\n      // loop thru all imageIds, load and cache them for exhibition (up the the maximum limit defined)\n      //\n      const maxImages = this.maxImagesToLoad <= 0 ? imageIdList.length : Math.min(this.maxImagesToLoad, imageIdList.length);\n      this.loadingImages = true; // activate progress indicator\n      this.targetImageCount = maxImages;\n      for (let index = 0; index < maxImages; index++) {\n        const imageId = imageIdList[index];\n        cornerstone.loadAndCacheImage(imageId).then(imageData => {\n          this.imageLoaded(imageData);\n        });\n      }\n    }\n    /**\n     * Load the next batch of images\n     */\n    loadMoreImages() {\n      this.element = this.viewPort.element;\n      //\n      // loop thru all imageIds, load and cache them for exhibition (up the the maximum limit defined)\n      //\n      const maxImages = this.maxImagesToLoad <= 0 ? this.imageIdList.length - this.loadedImages.length : Math.min(this.maxImagesToLoad, this.imageIdList.length - this.loadedImages.length);\n      this.loadingImages = true; // activate progress indicator\n      this.targetImageCount += maxImages;\n      let nextImageIndex = this.loadedImages.length;\n      for (let index = 0; index < maxImages; index++) {\n        const imageId = this.imageIdList[nextImageIndex++];\n        cornerstone.loadAndCacheImage(imageId).then(imageData => {\n          this.imageLoaded(imageData);\n        }).catch(err => {\n          this.targetImageCount--;\n        });\n      }\n    }\n    /**\n     *\n     * @param imageData the dicom image data\n     */\n    imageLoaded(imageData) {\n      //console.log(imageData.imageId)\n      // build list of series in all loadded images\n      const series = {\n        studyID: imageData.data.string('x0020000d'),\n        seriesID: imageData.data.string('x0020000e'),\n        seriesNumber: imageData.data.intString('x00200011'),\n        studyDescription: imageData.data.string('x00081030'),\n        seriesDescription: imageData.data.string('x0008103e'),\n        imageCount: 1,\n        imageList: [imageData]\n      };\n      // if this is a new series, add it to the list\n      let seriesIndex = this.seriesList.findIndex(item => item.seriesID === series.seriesID);\n      if (seriesIndex < 0) {\n        seriesIndex = this.seriesList.length;\n        this.seriesList.push(series);\n        this.seriesList.sort((a, b) => {\n          if (a.seriesNumber > b.seriesNumber) return 1;\n          if (a.seriesNumber < b.seriesNumber) return -1;\n          return 0;\n        });\n      } else {\n        let seriesItem = this.seriesList[seriesIndex];\n        seriesItem.imageCount++;\n        seriesItem.imageList.push(imageData);\n        seriesItem.imageList.sort((a, b) => {\n          if (a.data.intString('x00200013') > b.data.intString('x00200013')) return 1;\n          if (a.data.intString('x00200013') < b.data.intString('x00200013')) return -1;\n          return 0;\n        });\n      }\n      this.loadedImages.push(imageData); // save to images loaded\n      if (seriesIndex === this.currentSeriesIndex) {\n        //this.currentSeries = this.seriesList[seriesIndex];\n        //this.imageCount = this.currentSeries.imageCount; // get total image count\n        //this.viewPort.addImageData(imageData);\n        this.showSeries(this.currentSeriesIndex);\n      }\n      if (this.loadedImages.length >= this.targetImageCount) {\n        // did we finish loading images?\n        this.loadingImages = false; // deactivate progress indicator\n      }\n    }\n\n    showSeries(index) {\n      //        this.resetAllTools();\n      this.currentSeriesIndex = index;\n      this.currentSeries = this.seriesList[index];\n      this.imageCount = this.currentSeries.imageCount; // get total image count\n      this.viewPort.resetImageCache(); // clean up image cache\n      //        this.loadingImages = true; // activate progress indicator\n      for (let i = 0; i < this.currentSeries.imageList.length; i++) {\n        const imageData = this.currentSeries.imageList[i];\n        this.viewPort.addImageData(imageData);\n      }\n      //        this.loadingImages = false; // de-activate progress indicator\n    }\n\n    saveAs() {\n      cornerstoneTools.saveAs(this.element, \"teste.jpg\");\n    }\n    /**\n     * Image scroll methods\n     */\n    nextImage() {\n      if (this.viewPort.currentIndex < this.imageCount) {\n        this.viewPort.nextImage();\n      }\n    }\n    previousImage() {\n      if (this.viewPort.currentIndex > 0) {\n        this.viewPort.previousImage();\n      }\n    }\n    /**\n     * Methods to activate/deactivate viewer tools\n     */\n    // deactivate all tools\n    resetAllTools() {\n      if (this.imageCount > 0) {\n        this.viewPort.resetAllTools();\n        this.stopClip();\n      }\n    }\n    // activate windowing\n    enableWindowing() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.wwwc.activate(this.element, 1);\n        // cornerstoneTools.wwwcTouchDrag.activate(this.element);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Wwwc', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate zoom\n    enableZoom() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.zoom.activate(this.element, 5); // 5 is right mouse button and left mouse button\n        // cornerstoneTools.zoomTouchDrag.activate(this.element);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Zoom', {\n          mouseButtonMask: 1\n        }, ['Mouse']); // zoom left mouse\n        // cornerstoneTools.setToolActiveForElement(this.element, 'ZoomTouchPinch', { }, ['Mouse']);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Pan', {\n          mouseButtonMask: 2\n        }, ['Mouse']); // pan right mouse\n      }\n    }\n    // activate pan\n    enablePan() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.pan.activate(this.element, 3); // 3 is middle mouse button and left mouse button\n        // cornerstoneTools.panTouchDrag.activate(this.element);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Pan', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate image scroll\n    enableScroll() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.stackScroll.activate(this.element, 1);\n        // cornerstoneTools.stackScrollTouchDrag.activate(this.element);\n        // cornerstoneTools.stackScrollKeyboard.activate(this.element);\n        cornerstoneTools.setToolActiveForElement(this.element, 'StackScroll', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate length measurement\n    enableLength() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.length.activate(this.element, 1);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Length', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate angle measurement\n    enableAngle() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.simpleAngle.activate(this.element, 1);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Angle', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate pixel probe\n    enableProbe() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.probe.activate(this.element, 1);\n        cornerstoneTools.setToolActiveForElement(this.element, 'Probe', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate Elliptical ROI\n    enableElliptical() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.ellipticalRoi.activate(this.element, 1);\n        cornerstoneTools.setToolActiveForElement(this.element, 'EllipticalRoi', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // activate Rectangle ROI\n    enableRectangle() {\n      if (this.imageCount > 0) {\n        this.resetAllTools();\n        // cornerstoneTools.rectangleRoi.activate(this.element, 1);\n        cornerstoneTools.setToolActiveForElement(this.element, 'RectangleRoi', {\n          mouseButtonMask: 1\n        }, ['Mouse']);\n      }\n    }\n    // Play Clip\n    playClip() {\n      if (this.imageCount > 0) {\n        let frameRate = 10;\n        let stackState = cornerstoneTools.getToolState(this.element, 'stack');\n        if (stackState) {\n          frameRate = stackState.data[0].frameRate;\n          // Play at a default 10 FPS if the framerate is not specified\n          if (frameRate === undefined || frameRate === null || frameRate === 0) {\n            frameRate = 10;\n          }\n        }\n        cornerstoneTools.playClip(this.element, frameRate);\n      }\n    }\n    // Stop Clip\n    stopClip() {\n      cornerstoneTools.stopClip(this.element);\n    }\n    // invert image\n    invertImage() {\n      if (this.imageCount > 0) {\n        let viewport = cornerstone.getViewport(this.element);\n        // Toggle invert\n        if (viewport.invert === true) {\n          viewport.invert = false;\n        } else {\n          viewport.invert = true;\n        }\n        cornerstone.setViewport(this.element, viewport);\n      }\n    }\n    // reset image\n    resetImage() {\n      if (this.imageCount > 0) {\n        let toolStateManager = cornerstoneTools.getElementToolStateManager(this.element);\n        // Note that this only works on ImageId-specific tool state managers (for now)\n        //toolStateManager.clear(this.element);\n        cornerstoneTools.clearToolState(this.element, \"Length\");\n        cornerstoneTools.clearToolState(this.element, \"Angle\");\n        // cornerstoneTools.clearToolState(this.element, \"simpleAngle\");\n        cornerstoneTools.clearToolState(this.element, \"Probe\");\n        cornerstoneTools.clearToolState(this.element, \"EllipticalRoi\");\n        cornerstoneTools.clearToolState(this.element, \"RectangleRoi\");\n        cornerstone.updateImage(this.element);\n        this.resetAllTools();\n      }\n    }\n    clearImage() {\n      this.viewPort.resetViewer();\n      this.viewPort.resetImageCache();\n      this.seriesList = []; // list of series on the images being displayed\n      this.currentSeriesIndex = 0;\n      this.currentSeries = {};\n      this.imageCount = 0; // total image count being viewed\n    }\n    static #_ = this.ɵfac = function DICOMViewerComponent_Factory(t) {\n      return new (t || DICOMViewerComponent)();\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DICOMViewerComponent,\n      selectors: [[\"dicom-viewer\"]],\n      viewQuery: function DICOMViewerComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(CornerstoneDirective, 7);\n          i0.ɵɵviewQuery(ThumbnailDirective, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewPort = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.thumbnails = _t);\n        }\n      },\n      inputs: {\n        enableViewerTools: \"enableViewerTools\",\n        enablePlayTools: \"enablePlayTools\",\n        downloadImagesURL: \"downloadImagesURL\",\n        maxImagesToLoad: \"maxImagesToLoad\"\n      },\n      decls: 34,\n      vars: 17,\n      consts: [[2, \"display\", \"flex\", \"width\", \"100%\", \"height\", \"100%\"], [\"class\", \"thumbnailSelector\", \"style\", \"margin-right: 5px;\", 4, \"ngIf\"], [2, \"overflow\", \"hidden\", \"width\", \"100%\", \"height\", \"100%\", \"background-color\", \"black\"], [\"oncontextmenu\", \"return false\", \"unselectable\", \"on\", \"onselectstart\", \"return false;\", \"onmousedown\", \"return false;\", 1, \"cornerstone-enabled-image\", 2, \"width\", \"100%\", \"height\", \"calc(100% - 60px)\", \"position\", \"relative\", \"display\", \"inline-block\", \"color\", \"white\"], [\"cornerstone\", \"\", \"id\", \"dicomImage\", 2, \"width\", \"100%\", \"height\", \"100%\", \"top\", \"0px\", \"left\", \"0px\", \"position\", \"absolute\", \"outline\", \"none\", \"margin\", \"0 auto\"], [\"id\", \"mrtopleft\", 2, \"position\", \"absolute\", \"top\", \"3px\", \"left\", \"3px\"], [\"id\", \"mrtopright\", 2, \"position\", \"absolute\", \"top\", \"3px\", \"right\", \"3px\"], [\"id\", \"mrbottomleft\", 2, \"position\", \"absolute\", \"bottom\", \"3px\", \"left\", \"3px\"], [\"id\", \"mrbottomcenter\", 2, \"position\", \"absolute\", \"bottom\", \"3px\", \"width\", \"100%\", \"text-align\", \"center\", \"color\", \"red\"], [\"id\", \"mrbottomright\", 2, \"position\", \"absolute\", \"bottom\", \"6px\", \"right\", \"3px\"], [\"id\", \"sliceText\"], [2, \"text-align\", \"center\"], [1, \"btn-group\"], [\"class\", \"btn-group\", 4, \"ngIf\"], [\"title\", \"Zoom\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Drag\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"style\", \"scale:5px;color:whitesmoke\", \"title\", \"Drag\", \"size\", \"2x\", 3, \"icon\", \"click\", 4, \"ngIf\"], [\"download\", \"\", \"style\", \"border-left: 1px dotted white;\", \"class\", \"btn btn-sm btn-default\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Download Imagens\", 3, \"href\", 4, \"ngIf\"], [\"type\", \"button\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Imagem Anterior\", 1, \"btn\", \"btn-sm\", \"btn-default\", 2, \"border-left\", \"1px dotted white\", 3, \"ngStyle\", \"click\"], [1, \"fa\", \"fa-backward\"], [\"type\", \"button\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Pr\\u00F3xima Imagem\", 1, \"btn\", \"btn-sm\", \"btn-default\", 3, \"ngStyle\", \"click\"], [1, \"fa\", \"fa-forward\"], [\"type\", \"button\", \"style\", \"border-left: 1px dotted white;color: white;white-space: nowrap;\", \"class\", \"btn btn-sm btn-default\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Carrega mais imagens...\", 3, \"click\", 4, \"ngIf\"], [2, \"padding-left\", \"15px\", \"padding-top\", \"15px\", 3, \"ngStyle\"], [\"diameter\", \"30\", \"strokeWidth\", \"5\", \"color\", \"warn\", 2, \"display\", \"inline-block\"], [1, \"thumbnailSelector\", 2, \"margin-right\", \"5px\"], [1, \"thumbnails\", \"list-group\", 2, \"height\", \"100%\"], [\"class\", \"list-group-item\", \"oncontextmenu\", \"return false\", \"unselectable\", \"on\", \"onselectstart\", \"return false;\", \"onmousedown\", \"return false;\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"version\"], [2, \"color\", \"white\"], [\"oncontextmenu\", \"return false\", \"unselectable\", \"on\", \"onselectstart\", \"return false;\", \"onmousedown\", \"return false;\", 1, \"list-group-item\", 3, \"ngClass\", \"click\"], [\"thumbnail\", \"\", \"oncontextmenu\", \"return false\", \"unselectable\", \"on\", \"onselectstart\", \"return false;\", \"onmousedown\", \"return false;\", 1, \"csthumbnail\", 3, \"imageData\"], [1, \"text-center\", \"small\", 2, \"color\", \"white\"], [\"id\", \"imageCount\", 2, \"color\", \"red\", \"font-size\", \"10pt\"], [\"title\", \"Brightness\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"rgb(229, 255, 0)\", 3, \"icon\", \"click\"], [\"title\", \"Invert\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Scroll\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Length\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Angle\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Elliptical\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Rectangle\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"title\", \"Reset\", \"size\", \"2x\", 2, \"scale\", \"5px\", \"color\", \"whitesmoke\", 3, \"icon\", \"click\"], [\"download\", \"\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Download Imagens\", 1, \"btn\", \"btn-sm\", \"btn-default\", 2, \"border-left\", \"1px dotted white\", 3, \"href\"], [1, \"fa\", \"fa-download\"], [\"type\", \"button\", \"data-container\", \"body\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Carrega mais imagens...\", 1, \"btn\", \"btn-sm\", \"btn-default\", 2, \"border-left\", \"1px dotted white\", \"color\", \"white\", \"white-space\", \"nowrap\", 3, \"click\"], [1, \"fas\", \"fa-cloud-download-alt\"]],\n      template: function DICOMViewerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, DICOMViewerComponent_div_1_Template, 7, 1, \"div\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3);\n          i0.ɵɵelement(4, \"div\", 4);\n          i0.ɵɵelementStart(5, \"div\", 5);\n          i0.ɵɵtext(6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 6);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\");\n          i0.ɵɵtext(11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\");\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelement(14, \"div\", 8);\n          i0.ɵɵelementStart(15, \"div\", 9)(16, \"div\", 10);\n          i0.ɵɵtext(17);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(18, \"div\", 11)(19, \"div\", 12);\n          i0.ɵɵtemplate(20, DICOMViewerComponent_div_20_Template, 10, 9, \"div\", 13);\n          i0.ɵɵelementStart(21, \"div\", 12)(22, \"fa-icon\", 14);\n          i0.ɵɵlistener(\"click\", function DICOMViewerComponent_Template_fa_icon_click_22_listener() {\n            return ctx.enableZoom();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"fa-icon\", 15);\n          i0.ɵɵlistener(\"click\", function DICOMViewerComponent_Template_fa_icon_click_23_listener() {\n            return ctx.enablePan();\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, DICOMViewerComponent_fa_icon_24_Template, 1, 1, \"fa-icon\", 16);\n          i0.ɵɵtemplate(25, DICOMViewerComponent_fa_icon_25_Template, 1, 1, \"fa-icon\", 16);\n          i0.ɵɵtemplate(26, DICOMViewerComponent_a_26_Template, 2, 1, \"a\", 17);\n          i0.ɵɵelementStart(27, \"button\", 18);\n          i0.ɵɵlistener(\"click\", function DICOMViewerComponent_Template_button_click_27_listener() {\n            return ctx.previousImage();\n          });\n          i0.ɵɵelement(28, \"span\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"button\", 20);\n          i0.ɵɵlistener(\"click\", function DICOMViewerComponent_Template_button_click_29_listener() {\n            return ctx.nextImage();\n          });\n          i0.ɵɵelement(30, \"span\", 21);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(31, DICOMViewerComponent_a_31_Template, 3, 1, \"a\", 22);\n          i0.ɵɵelementStart(32, \"div\", 23);\n          i0.ɵɵelement(33, \"mat-spinner\", 24);\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.seriesList.length > 1);\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.viewPort.patientName, \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.viewPort.hospital, \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.viewPort.instanceNumber, \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" WW/WC: \", ctx.viewPort.windowingValue, \" \");\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate2(\"Image: \", ctx.imageCount > 0 ? ctx.viewPort.currentIndex + 1 : 0, \"/\", ctx.imageCount, \"\");\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.enableViewerTools);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"icon\", ctx.faSearchPlus);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"icon\", ctx.faArrowsAlt);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.enablePlayTools);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.enablePlayTools);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.downloadImagesURL != \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngStyle\", ctx.hidePreviousImage);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngStyle\", ctx.hideNextImage);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.moreImagestoLoad != \"\");\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngStyle\", ctx.showProgress);\n        }\n      },\n      dependencies: [i1.NgClass, i1.NgForOf, i1.NgIf, i1.NgStyle, i2.MatProgressSpinner, i3.FaIconComponent, i4.CornerstoneDirective, i5.ThumbnailDirective],\n      styles: [\".btn-default[_ngcontent-%COMP%]{color:#fff;background-color:#424242;border-color:#424242;font-size:24pt;background-image:none;text-shadow:none}.thumbnailSelector[_ngcontent-%COMP%]{width:106px;float:left;margin-left:5px;height:100%;background-color:#424242}.thumbnails[_ngcontent-%COMP%]{margin:0;overflow-y:scroll;overflow-x:hidden}.csthumbnail[_ngcontent-%COMP%]{color:#fff;background-color:#000;width:100px;height:100px;border:0px;padding:0}.version[_ngcontent-%COMP%]{position:absolute;bottom:20px;width:106px;text-align:center}a.list-group-item[_ngcontent-%COMP%]{background-color:#000;padding:2px;border:1px solid #424242;z-index:5;margin-bottom:3px}a.list-group-item.active[_ngcontent-%COMP%], a.list-group-item.active[_ngcontent-%COMP%]:hover, a.list-group-item.active[_ngcontent-%COMP%]:focus{background-color:#424242;border-color:#4e4e4e;background-image:linear-gradient(red,red,red)}\"]\n    });\n  }\n  return DICOMViewerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}