{"ast":null,"code":"/*! @azure/msal-browser v3.6.0 2023-12-01 */\n'use strict';\n\nimport { Constants, StubPerformanceClient, ProtocolMode, Logger, createClientConfigurationError, ClientConfigurationErrorCodes, ServerResponseType, AzureCloudInstance, LogLevel, DEFAULT_SYSTEM_OPTIONS, StubbedNetworkModule } from '@azure/msal-common';\nimport { BrowserCacheLocation, BrowserConstants } from '../utils/BrowserConstants.mjs';\nimport { NavigationClient } from '../navigation/NavigationClient.mjs';\nimport { FetchClient } from '../network/FetchClient.mjs';\n\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n// Default timeout for popup windows and iframes in milliseconds\nconst DEFAULT_POPUP_TIMEOUT_MS = 60000;\nconst DEFAULT_IFRAME_TIMEOUT_MS = 10000;\nconst DEFAULT_REDIRECT_TIMEOUT_MS = 30000;\nconst DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS = 2000;\n/**\n * MSAL function that sets the default options when not explicitly configured from app developer\n *\n * @param auth\n * @param cache\n * @param system\n *\n * @returns Configuration object\n */\nfunction buildConfiguration({\n  auth: userInputAuth,\n  cache: userInputCache,\n  system: userInputSystem,\n  telemetry: userInputTelemetry\n}, isBrowserEnvironment) {\n  // Default auth options for browser\n  const DEFAULT_AUTH_OPTIONS = {\n    clientId: Constants.EMPTY_STRING,\n    authority: `${Constants.DEFAULT_AUTHORITY}`,\n    knownAuthorities: [],\n    cloudDiscoveryMetadata: Constants.EMPTY_STRING,\n    authorityMetadata: Constants.EMPTY_STRING,\n    redirectUri: Constants.EMPTY_STRING,\n    postLogoutRedirectUri: Constants.EMPTY_STRING,\n    navigateToLoginRequestUrl: true,\n    clientCapabilities: [],\n    protocolMode: ProtocolMode.AAD,\n    OIDCOptions: {\n      serverResponseType: ServerResponseType.FRAGMENT,\n      defaultScopes: [Constants.OPENID_SCOPE, Constants.PROFILE_SCOPE, Constants.OFFLINE_ACCESS_SCOPE]\n    },\n    azureCloudOptions: {\n      azureCloudInstance: AzureCloudInstance.None,\n      tenant: Constants.EMPTY_STRING\n    },\n    skipAuthorityMetadataCache: false,\n    supportsNestedAppAuth: false\n  };\n  // Default cache options for browser\n  const DEFAULT_CACHE_OPTIONS = {\n    cacheLocation: BrowserCacheLocation.SessionStorage,\n    temporaryCacheLocation: BrowserCacheLocation.SessionStorage,\n    storeAuthStateInCookie: false,\n    secureCookies: false,\n    // Default cache migration to true if cache location is localStorage since entries are preserved across tabs/windows. Migration has little to no benefit in sessionStorage and memoryStorage\n    cacheMigrationEnabled: userInputCache && userInputCache.cacheLocation === BrowserCacheLocation.LocalStorage ? true : false,\n    claimsBasedCachingEnabled: false\n  };\n  // Default logger options for browser\n  const DEFAULT_LOGGER_OPTIONS = {\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    loggerCallback: () => {\n      // allow users to not set logger call back\n    },\n    logLevel: LogLevel.Info,\n    piiLoggingEnabled: false\n  };\n  // Default system options for browser\n  const DEFAULT_BROWSER_SYSTEM_OPTIONS = {\n    ...DEFAULT_SYSTEM_OPTIONS,\n    loggerOptions: DEFAULT_LOGGER_OPTIONS,\n    networkClient: isBrowserEnvironment ? new FetchClient() : StubbedNetworkModule,\n    navigationClient: new NavigationClient(),\n    loadFrameTimeout: 0,\n    // If loadFrameTimeout is provided, use that as default.\n    windowHashTimeout: userInputSystem?.loadFrameTimeout || DEFAULT_POPUP_TIMEOUT_MS,\n    iframeHashTimeout: userInputSystem?.loadFrameTimeout || DEFAULT_IFRAME_TIMEOUT_MS,\n    navigateFrameWait: 0,\n    redirectNavigationTimeout: DEFAULT_REDIRECT_TIMEOUT_MS,\n    asyncPopups: false,\n    allowRedirectInIframe: false,\n    allowNativeBroker: false,\n    nativeBrokerHandshakeTimeout: userInputSystem?.nativeBrokerHandshakeTimeout || DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS,\n    pollIntervalMilliseconds: BrowserConstants.DEFAULT_POLL_INTERVAL_MS\n  };\n  const providedSystemOptions = {\n    ...DEFAULT_BROWSER_SYSTEM_OPTIONS,\n    ...userInputSystem,\n    loggerOptions: userInputSystem?.loggerOptions || DEFAULT_LOGGER_OPTIONS\n  };\n  const DEFAULT_TELEMETRY_OPTIONS = {\n    application: {\n      appName: Constants.EMPTY_STRING,\n      appVersion: Constants.EMPTY_STRING\n    },\n    client: new StubPerformanceClient()\n  };\n  // Throw an error if user has set OIDCOptions without being in OIDC protocol mode\n  if (userInputAuth?.protocolMode !== ProtocolMode.OIDC && userInputAuth?.OIDCOptions) {\n    const logger = new Logger(providedSystemOptions.loggerOptions);\n    logger.warning(JSON.stringify(createClientConfigurationError(ClientConfigurationErrorCodes.cannotSetOIDCOptions)));\n  }\n  // Throw an error if user has set allowNativeBroker to true without being in AAD protocol mode\n  if (userInputAuth?.protocolMode && userInputAuth.protocolMode !== ProtocolMode.AAD && providedSystemOptions?.allowNativeBroker) {\n    throw createClientConfigurationError(ClientConfigurationErrorCodes.cannotAllowNativeBroker);\n  }\n  const overlayedConfig = {\n    auth: {\n      ...DEFAULT_AUTH_OPTIONS,\n      ...userInputAuth,\n      OIDCOptions: {\n        ...DEFAULT_AUTH_OPTIONS.OIDCOptions,\n        ...userInputAuth?.OIDCOptions\n      }\n    },\n    cache: {\n      ...DEFAULT_CACHE_OPTIONS,\n      ...userInputCache\n    },\n    system: providedSystemOptions,\n    telemetry: {\n      ...DEFAULT_TELEMETRY_OPTIONS,\n      ...userInputTelemetry\n    }\n  };\n  return overlayedConfig;\n}\nexport { DEFAULT_IFRAME_TIMEOUT_MS, DEFAULT_NATIVE_BROKER_HANDSHAKE_TIMEOUT_MS, DEFAULT_POPUP_TIMEOUT_MS, DEFAULT_REDIRECT_TIMEOUT_MS, buildConfiguration };\n//# sourceMappingURL=Configuration.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}